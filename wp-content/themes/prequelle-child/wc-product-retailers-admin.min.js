jQuery(document).ready(function(a) {
    "use strict";

    function b() {
        var b = 0;
        a("table.wc-product-retailers tbody tr").each(function(c, d) {
            a("input", d).each(function(c, d) {
                var e = a(d);
                e.attr("name", e.attr("name").replace(/\[([^[]*)\]/, "[" + b + "]"))
            }), b++
        })
    }
    if (a().select2) {
        var c = function(a) {
                return {
                    term: wc_product_retailers_admin_params.is_wc_gte_3_0 ? a.term : a,
                    action: "wc_product_retailers_search_retailers",
                    security: wc_product_retailers_admin_params.search_retailers_nonce
                }
            },
            d = function(b) {
                var c = [],
                    d = a('table.wc-product-retailers tr.wc-product-retailer input[type="text"]').map(function() {
                        return a(this).data("post-id")
                    }).get();
                return b && a.each(b, function() {
                    -1 === a.inArray(this.id, d) && c.push({
                        id: this.id,
                        text: this.name
                    })
                }), {
                    results: c
                }
            },
            e = {
                minimumInputLength: 3,
                ajax: {
                    url: ajaxurl,
                    delay: 250,
                    quietMillis: 250,
                    data: function(a) {
                        return c(a)
                    },
                    processResults: function(a) {
                        return d(a)
                    },
                    results: function(a) {
                        return d(a)
                    },
                    cache: !0
                }
            };
        a("input.wc-retailers-search, select.wc-retailers-search").select2(e).addClass("enhanced")
    }
    a("button.wc-product-retailers-add-retailer").click(function() {
        
        var c = a("input.wc-retailers-search, select.wc-retailers-search"),
            tab =  a("input.tab-retailers-search").val(),
            d = c.val();
        d && (a.isArray(d) || (d = d.split(",")), a(d).each(function() {
            a("input#wc-product-retailer-product-url-" + this).length || a.get(ajaxurl, {
                action: "wc_product_retailers_search_retailers",
                security: wc_product_retailers_admin_params.search_retailers_nonce,
                term: this,
                tab: tab
            }, function(b) {
                b.length && (a("table.wc-product-retailers > tbody").append('<tr class="wc-product-retailer_' + b[0].tab + '"><td class="check-column"><input type="checkbox" name="select" /><input type="hidden" name="_wc_product_retailer_id_' + b[0].tab + '[' + a("table.wc-product-retailers tbody tr").length + ']" value="' + b[0].id + '" /></td><td class="wc-product-retailer-name">' + b[0].name + '</td><td class="wc-product-retailer-product-price"><input type="text" data-post-id="' + b[0].id + '" id="wc-product-retailer-product-price-' + b[0].id + '" name="_wc_product_retailer_product_price_'+b[0].tab+'[' + a("table.wc-product-retailers tbody tr").length + ']" /></td><td class="wc-product-retailer-product-price"><input type="date" data-post-id="' + b[0].id + '" id="wc-product-retailer-product-date-' + b[0].id + '" name="_wc_product_retailer_product_date_'+b[0].tab+'[' + a("table.wc-product-retailers tbody tr").length + ']" /></td><td class="wc-product-retailer-product-price"><input type="text" data-post-id="' + b[0].id + '" id="wc-product-retailer-product-coupon-' + b[0].id + '" name="_wc_product_retailer_product_coupon_'+b[0].tab+'[' + a("table.wc-product-retailers tbody tr").length + ']" /></td><td class="wc-product-retailer-product-price"><input type="text" data-post-id="' + b[0].id + '" id="wc-product-retailer-product-saleprice-' + b[0].id + '" name="_wc_product_retailer_product_saleprice_'+b[0].tab+'[' + a("table.wc-product-retailers tbody tr").length + ']" /></td><td class="wc-product-retailer-product-price"><input type="text" data-post-id="' + b[0].id + '" id="wc-product-retailer-product-color-' + b[0].id + '" name="_wc_product_retailer_product_color_'+b[0].tab+'[' + a("table.wc-product-retailers tbody tr").length + ']" /></td><td class="wc-product-retailer-product-url"><input type="text" data-post-id="' + b[0].id + '" id="wc-product-retailer-product-url-' + b[0].id + '" name="_wc_product_retailer_product_url_'+b[0].tab+'[' + a("table.wc-product-retailers tbody tr").length + ']" value="' + b[0].product_url + '" /></td></tr>'), wc_product_retailers_admin_params.is_wc_gte_3_0 ? c.val(null).trigger("change") : c.select2("val", ""))
            })
        }), b())
    }), a("button.wc-product-retailers-delete-retailer").click(function() {
        a("table.wc-product-retailers td.check-column input:checked").each(function() {
            a(this).closest("tr.wc-product-retailer").fadeOut("400", function() {
                a(this).remove()
            })
        }), b()
    }), a("table.wc-product-retailers tbody").sortable({
        items: "tr",
        cursor: "move",
        axis: "y",
        handle: "td",
        scrollSensitivity: 40,
        start: function(a, b) {
            b.item.css("background-color", "#f6f6f6")
        },
        stop: function(a, c) {
            c.item.removeAttr("style"), b()
        }
    })
    //after market
    function b() {
        var b = 0;
        a("table.wc-product-retailers_aftermarket tbody tr").each(function(c, d) {
            a("input", d).each(function(c, d) {
                var e = a(d);
                e.attr("name", e.attr("name").replace(/\[([^[]*)\]/, "[" + b + "]"))
            }), b++
        })
    }
    if (a().select2) {
        var c = function(a) {
                return {
                    term: wc_product_retailers_admin_params.is_wc_gte_3_0 ? a.term : a,
                    action: "wc_product_retailers_search_retailers",
                    security: wc_product_retailers_admin_params.search_retailers_nonce
                }
            },
            d = function(b) {
                var c = [],
                    d = a('table.wc-product-retailers_aftermarket tr.wc-product-retailer_aftermarket input[type="text"]').map(function() {
                        return a(this).data("post-id")
                    }).get();
                return b && a.each(b, function() {
                    -1 === a.inArray(this.id, d) && c.push({
                        id: this.id,
                        text: this.name
                    })
                }), {
                    results: c
                }
            },
            e = {
                minimumInputLength: 3,
                ajax: {
                    url: ajaxurl,
                    delay: 250,
                    quietMillis: 250,
                    data: function(a) {
                        return c(a)
                    },
                    processResults: function(a) {
                        return d(a)
                    },
                    results: function(a) {
                        return d(a)
                    },
                    cache: !0
                }
            };
        a("input.wc-retailers-search_aftermarket, select.wc-retailers-search_aftermarket").select2(e).addClass("enhanced")
    }
    a("button.wc-product-retailers-add-retailer_aftermarket").click(function() {
        
        var c = a("input.wc-retailers-search_aftermarket, select.wc-retailers-search_aftermarket"),
            tab =  a("input.tab-retailers-search-aftermarket").val(),
            d = c.val();
        d && (a.isArray(d) || (d = d.split(",")), a(d).each(function() {
            a("input#wc-product-retailer-product-url-aftermarket" + this).length || a.get(ajaxurl, {
                action: "wc_product_retailers_search_retailers_aftermarket",
                security: wc_product_retailers_admin_params.search_retailers_nonce,
                term: this,
                tab: tab
            }, function(b) {
                b.length && (a("table.wc-product-retailers_aftermarket > tbody").append('<tr class="wc-product-retailer_aftermarket' + b[0].tab + '"><td class="check-column"><input type="checkbox" name="select" /><input type="hidden" name="_wc_product_retailer_id_' + b[0].tab + '[' + a("table.wc-product-retailers tbody tr").length + ']" value="' + b[0].id + '" /></td><td class="wc-product-retailer-name">' + b[0].name + '</td><td class="wc-product-retailer-product-price"><input type="text" data-post-id="' + b[0].id + '" id="wc-product-retailer-product-price-' + b[0].id + '" name="_wc_product_retailer_product_price_'+b[0].tab+'[' + a("table.wc-product-retailers tbody tr").length + ']" /></td><td class="wc-product-retailer-product-price"><input type="date" data-post-id="' + b[0].id + '" id="wc-product-retailer-product-date-' + b[0].id + '" name="_wc_product_retailer_product_date_'+b[0].tab+'[' + a("table.wc-product-retailers tbody tr").length + ']" /></td><td class="wc-product-retailer-product-price"><input type="text" data-post-id="' + b[0].id + '" id="wc-product-retailer-product-coupon-' + b[0].id + '" name="_wc_product_retailer_product_coupon_'+b[0].tab+'[' + a("table.wc-product-retailers tbody tr").length + ']" /></td><td class="wc-product-retailer-product-price"><input type="text" data-post-id="' + b[0].id + '" id="wc-product-retailer-product-saleprice-' + b[0].id + '" name="_wc_product_retailer_product_saleprice_'+b[0].tab+'[' + a("table.wc-product-retailers tbody tr").length + ']" /></td><td class="wc-product-retailer-product-price"><input type="text" data-post-id="' + b[0].id + '" id="wc-product-retailer-product-color-' + b[0].id + '" name="_wc_product_retailer_product_color_'+b[0].tab+'[' + a("table.wc-product-retailers tbody tr").length + ']" /></td><td class="wc-product-retailer-product-url"><input type="text" data-post-id="' + b[0].id + '" id="wc-product-retailer-product-url-' + b[0].id + '" name="_wc_product_retailer_product_url_'+b[0].tab+'[' + a("table.wc-product-retailers tbody tr").length + ']" value="' + b[0].product_url + '" /></td></tr>'), wc_product_retailers_admin_params.is_wc_gte_3_0 ? c.val(null).trigger("change") : c.select2("val", ""))
            })
        }), b())
    }), a("button.wc-product-retailers-delete-retailer-aftermarket").click(function() {
        a("table.wc-product-retailers_aftermarket td.check-column input:checked").each(function() {
            a(this).closest("tr.wc-product-retailer_aftermarket").fadeOut("400", function() {
                a(this).remove()
            })
        }), b()
    }), a("table.wc-product-retailers_aftermarket tbody").sortable({
        items: "tr",
        cursor: "move",
        axis: "y",
        handle: "td",
        scrollSensitivity: 40,
        start: function(a, b) {
            b.item.css("background-color", "#f6f6f6")
        },
        stop: function(a, c) {
            c.item.removeAttr("style"), b()
        }
    })
    //raffles
    function b() {
        var b = 0;
        a("table.wc-product-retailers_raffles tbody tr").each(function(c, d) {
            a("input", d).each(function(c, d) {
                var e = a(d);
                e.attr("name", e.attr("name").replace(/\[([^[]*)\]/, "[" + b + "]"))
            }), b++
        })
    }
    if (a().select2) {
        var c = function(a) {
                return {
                    term: wc_product_retailers_admin_params.is_wc_gte_3_0 ? a.term : a,
                    action: "wc_product_retailers_search_retailers",
                    security: wc_product_retailers_admin_params.search_retailers_nonce
                }
            },
            d = function(b) {
                var c = [],
                    d = a('table.wc-product-retailers_raffles tr.wc-product-retailer_raffles input[type="text"]').map(function() {
                        return a(this).data("post-id")
                    }).get();
                return b && a.each(b, function() {
                    -1 === a.inArray(this.id, d) && c.push({
                        id: this.id,
                        text: this.name
                    })
                }), {
                    results: c
                }
            },
            e = {
                minimumInputLength: 3,
                ajax: {
                    url: ajaxurl,
                    delay: 250,
                    quietMillis: 250,
                    data: function(a) {
                        return c(a)
                    },
                    processResults: function(a) {
                        return d(a)
                    },
                    results: function(a) {
                        return d(a)
                    },
                    cache: !0
                }
            };
        a("input.wc-retailers-search_raffles, select.wc-retailers-search_raffles").select2(e).addClass("enhanced")
    }
    a("button.wc-product-retailers-add-retailer").click(function() {
        
        var c = a("input.wc-retailers-search_raffles, select.wc-retailers-search_raffles"),
            tab =  a("input.tab-retailers-search-raffles").val(),
            d = c.val();
        d && (a.isArray(d) || (d = d.split(",")), a(d).each(function() {
            a("input#wc-product-retailer-product-url-raffles" + this).length || a.get(ajaxurl, {
                action: "wc_product_retailers_search_retailers",
                security: wc_product_retailers_admin_params.search_retailers_nonce,
                term: this,
                tab: tab
            }, function(b) {
                b.length && (a("table.wc-product-retailers_raffles > tbody").append('<tr class="wc-product-retailer_' + b[0].tab + '"><td class="check-column"><input type="checkbox" name="select" /><input type="hidden" name="_wc_product_retailer_id_' + b[0].tab + '[' + a("table.wc-product-retailers tbody tr").length + ']" value="' + b[0].id + '" /></td><td class="wc-product-retailer-name">' + b[0].name + '</td><td class="wc-product-retailer-product-price"><input type="text" data-post-id="' + b[0].id + '" id="wc-product-retailer-product-price-' + b[0].id + '" name="_wc_product_retailer_product_price_'+b[0].tab+'[' + a("table.wc-product-retailers tbody tr").length + ']" /></td><td class="wc-product-retailer-product-price"><input type="date" data-post-id="' + b[0].id + '" id="wc-product-retailer-product-date-' + b[0].id + '" name="_wc_product_retailer_product_date_'+b[0].tab+'[' + a("table.wc-product-retailers tbody tr").length + ']" /></td><td class="wc-product-retailer-product-price"><input type="text" data-post-id="' + b[0].id + '" id="wc-product-retailer-product-coupon-' + b[0].id + '" name="_wc_product_retailer_product_coupon_'+b[0].tab+'[' + a("table.wc-product-retailers tbody tr").length + ']" /></td><td class="wc-product-retailer-product-price"><input type="text" data-post-id="' + b[0].id + '" id="wc-product-retailer-product-saleprice-' + b[0].id + '" name="_wc_product_retailer_product_saleprice_'+b[0].tab+'[' + a("table.wc-product-retailers tbody tr").length + ']" /></td><td class="wc-product-retailer-product-price"><input type="text" data-post-id="' + b[0].id + '" id="wc-product-retailer-product-color-' + b[0].id + '" name="_wc_product_retailer_product_color_'+b[0].tab+'[' + a("table.wc-product-retailers tbody tr").length + ']" /></td><td class="wc-product-retailer-product-url"><input type="text" data-post-id="' + b[0].id + '" id="wc-product-retailer-product-url-' + b[0].id + '" name="_wc_product_retailer_product_url_'+b[0].tab+'[' + a("table.wc-product-retailers tbody tr").length + ']" value="' + b[0].product_url + '" /></td></tr>'), wc_product_retailers_admin_params.is_wc_gte_3_0 ? c.val(null).trigger("change") : c.select2("val", ""))
            })
        }), b())
    }), a("button.wc-product-retailers-delete-retailer-raffles").click(function() {
        a("table.wc-product-retailers_raffles td.check-column input:checked").each(function() {
            a(this).closest("tr.wc-product-retailer_raffles").fadeOut("400", function() {
                a(this).remove()
            })
        }), b()
    }), a("table.wc-product-retailers_raffles tbody").sortable({
        items: "tr",
        cursor: "move",
        axis: "y",
        handle: "td",
        scrollSensitivity: 40,
        start: function(a, b) {
            b.item.css("background-color", "#f6f6f6")
        },
        stop: function(a, c) {
            c.item.removeAttr("style"), b()
        }
    })
    //Where to Buy
    function b() {
        var b = 0;
        a("table.wc-product-retailers_wheretobuy tbody tr").each(function(c, d) {
            a("input", d).each(function(c, d) {
                var e = a(d);
                e.attr("name", e.attr("name").replace(/\[([^[]*)\]/, "[" + b + "]"))
            }), b++
        })
    }
    if (a().select2) {
        var c = function(a) {
                return {
                    term: wc_product_retailers_admin_params.is_wc_gte_3_0 ? a.term : a,
                    action: "wc_product_retailers_search_retailers",
                    security: wc_product_retailers_admin_params.search_retailers_nonce
                }
            },
            d = function(b) {
                var c = [],
                    d = a('table.wc-product-retailers_wheretobuy tr.wc-product-retailer_wheretobuy input[type="text"]').map(function() {
                        return a(this).data("post-id")
                    }).get();
                return b && a.each(b, function() {
                    -1 === a.inArray(this.id, d) && c.push({
                        id: this.id,
                        text: this.name
                    })
                }), {
                    results: c
                }
            },
            e = {
                minimumInputLength: 3,
                ajax: {
                    url: ajaxurl,
                    delay: 250,
                    quietMillis: 250,
                    data: function(a) {
                        return c(a)
                    },
                    processResults: function(a) {
                        return d(a)
                    },
                    results: function(a) {
                        return d(a)
                    },
                    cache: !0
                }
            };
        a("input.wc-retailers-search_wheretobuy, select.wc-retailers-search_wheretobuy").select2(e).addClass("enhanced")
    }
    a("button.wc-product-retailers-add-retailer").click(function() {
        
        var c = a("input.wc-retailers-search_wheretobuy, select.wc-retailers-search_wheretobuy"),
            tab =  a("input.tab-retailers-search-wheretobuy").val(),
            d = c.val();
        d && (a.isArray(d) || (d = d.split(",")), a(d).each(function() {
            a("input#wc-product-retailer-product-url-wheretobuy" + this).length || a.get(ajaxurl, {
                action: "wc_product_retailers_search_retailers",
                security: wc_product_retailers_admin_params.search_retailers_nonce,
                term: this,
                tab: tab
            }, function(b) {
                b.length && (a("table.wc-product-retailers_wheretobuy > tbody").append('<tr class="wc-product-retailer_' + b[0].tab + '"><td class="check-column"><input type="checkbox" name="select" /><input type="hidden" name="_wc_product_retailer_id_' + b[0].tab + '[' + a("table.wc-product-retailers tbody tr").length + ']" value="' + b[0].id + '" /></td><td class="wc-product-retailer-name">' + b[0].name + '</td><td class="wc-product-retailer-product-price"><input type="text" data-post-id="' + b[0].id + '" id="wc-product-retailer-product-price-' + b[0].id + '" name="_wc_product_retailer_product_price_'+b[0].tab+'[' + a("table.wc-product-retailers tbody tr").length + ']" /></td><td class="wc-product-retailer-product-price"><input type="date" data-post-id="' + b[0].id + '" id="wc-product-retailer-product-date-' + b[0].id + '" name="_wc_product_retailer_product_date_'+b[0].tab+'[' + a("table.wc-product-retailers tbody tr").length + ']" /></td><td class="wc-product-retailer-product-price"><input type="text" data-post-id="' + b[0].id + '" id="wc-product-retailer-product-coupon-' + b[0].id + '" name="_wc_product_retailer_product_coupon_'+b[0].tab+'[' + a("table.wc-product-retailers tbody tr").length + ']" /></td><td class="wc-product-retailer-product-price"><input type="text" data-post-id="' + b[0].id + '" id="wc-product-retailer-product-saleprice-' + b[0].id + '" name="_wc_product_retailer_product_saleprice_'+b[0].tab+'[' + a("table.wc-product-retailers tbody tr").length + ']" /></td><td class="wc-product-retailer-product-price"><input type="text" data-post-id="' + b[0].id + '" id="wc-product-retailer-product-color-' + b[0].id + '" name="_wc_product_retailer_product_color_'+b[0].tab+'[' + a("table.wc-product-retailers tbody tr").length + ']" /></td><td class="wc-product-retailer-product-url"><input type="text" data-post-id="' + b[0].id + '" id="wc-product-retailer-product-url-' + b[0].id + '" name="_wc_product_retailer_product_url_'+b[0].tab+'[' + a("table.wc-product-retailers tbody tr").length + ']" value="' + b[0].product_url + '" /></td></tr>'), wc_product_retailers_admin_params.is_wc_gte_3_0 ? c.val(null).trigger("change") : c.select2("val", ""))
            })
        }), b())
    }), a("button.wc-product-retailers-delete-retailer-wheretobuy").click(function() {
        a("table.wc-product-retailers_wheretobuy td.check-column input:checked").each(function() {
            a(this).closest("tr.wc-product-retailer_wheretobuy").fadeOut("400", function() {
                a(this).remove()
            })
        }), b()
    }), a("table.wc-product-retailers_wheretobuy tbody").sortable({
        items: "tr",
        cursor: "move",
        axis: "y",
        handle: "td",
        scrollSensitivity: 40,
        start: function(a, b) {
            b.item.css("background-color", "#f6f6f6")
        },
        stop: function(a, c) {
            c.item.removeAttr("style"), b()
        }
    })
});
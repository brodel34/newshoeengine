var PrequelleLoadPosts=function(a){"use strict";return{init:function(){this.loadMorePosts()},loadMorePosts:function(){var b=this;a(document).on("click",".loadmore-button",function(c){if(c.preventDefault(),PrequelleParams.isCustomizer)return c.stopPropagation(),void alert(PrequelleParams.l10n.infiniteScrollDisabledMsg);var d=a(this),e=d.attr("href");d.hasClass("trigger-loading")||(d.addClass("trigger-loading"),d.html(PrequelleParams.l10n.infiniteScrollMsg),a.get(e,function(a){a?b.processContent(a,d):console.log("empty response")}))})},processContent:function(b,c){if(b){var d,e,f,g=this,h=c.attr("href"),i=c.parent().prev().attr("id"),j=a("#"+i),k=parseInt(c.attr("data-max-pages"),10),l=j.find(".entry:last-child"),m=l.offset().top+l.height();e=a(document.createElement("html")),e[0].innerHTML=b,d=e.find("#"+i).html(),f=parseInt(e.find(".loadmore-button").attr("data-next-page"),10),j.append(d),g.trackPageView(h),PrequelleParams.doHashChange&&history.pushState(null,null,h),k<f||void 0===f||isNaN(f)?(c.html(PrequelleParams.l10n.infiniteScrollEndMsg),setTimeout(function(){c.fadeOut(500,function(){a(this).remove()})},3e3)):a.post(PrequelleParams.ajaxUrl,{action:"prequelle_ajax_get_next_page_link",href:c.attr("href")},function(b){b&&a.parseJSON(b)&&(b=a.parseJSON(b),c.attr("data-current-page",b.currentPage),c.attr("data-next-page",b.nextPage),c.attr("href",b.href)),c.removeClass("trigger-loading"),c.html(PrequelleParams.l10n.loadMoreMsg)}),g.callBack(j),j.hasClass("grid-padding-yes")&&(m+=14),j.hasClass("display-metro")||j.hasClass("display-masonry")||j.hasClass("display-masonry_modern")?setTimeout(function(){g.scrollToPoint(a(window).scrollTop()+200)},1e3):setTimeout(function(){g.scrollToPoint(m)},1e3),setTimeout(function(){window.dispatchEvent(new Event("resize"))},1500)}},urldecode:function(a){var b=document.createElement("textarea");return b.innerHTML=a,b.value},scrollToPoint:function(b){a("html, body").stop().animate({scrollTop:b-PrequelleUi.getToolBarOffset()},1e3,"swing")},trackPageView:function(a){"undefined"!=typeof _gaq?_gaq.push(["_trackPageview",a]):"undefined"!=typeof ga&&ga("send","pageview",{page:a})},callBack:function(b){b=b||a(".items"),"undefined"!=typeof PrequelleUi&&(PrequelleUi.adjustmentClasses(),PrequelleUi.resizeVideoBackground(),PrequelleUi.lazyLoad(),PrequelleUi.fluidVideos(b,!0),PrequelleUi.flexSlider(),PrequelleUi.lightbox(),PrequelleUi.addItemAnimationDelay(),PrequelleUi.parallax(),PrequelleUi.setInternalLinkClass(),PrequelleUi.muteVimeoBackgrounds(),setTimeout(function(){PrequelleUi.videoThumbnailPlayOnHover()},200)),"undefined"!=typeof PrequelleYTVideoBg&&(PrequelleYTVideoBg.init(b),PrequelleYTVideoBg.playVideo(b)),(a(".masonry-container").length||a(".metro-container").length)&&(PrequelleMasonry.masonry(),PrequelleMasonry.resizeTimer(),b.data("isotope")&&b.isotope("reloadItems").isotope()),a(".fleximages-container").length&&PrequelleMasonry.flexImages(),"undefined"!=typeof PrequelleAjaxNav&&PrequelleAjaxNav.setAjaxLinkClass(),"undefined"!=typeof WPM&&WPM.init(),"undefined"!=typeof WVCBigText&&WVCBigText.init(),"undefined"!=typeof WolfCustomPostMeta&&WolfCustomPostMeta.checkLikedPosts(),b.find(".twitter-tweet").length&&a.getScript("http://platform.twitter.com/widgets.js"),b.find(".instagram-media").length&&(a.getScript("//platform.instagram.com/en_US/embeds.js"),void 0!==window.instgrm&&window.instgrm.Embeds.process()),b.find("audio:not(.minimal-player-audio):not(.loop-post-player-audio),video").length&&b.find("audio,video").mediaelementplayer()}}}(jQuery);!function(a){"use strict";a(document).ready(function(){PrequelleLoadPosts.init()})}(jQuery);